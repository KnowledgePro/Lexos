{% extends "base.html" %}

{% block head %}
<script type="text/javascript" src="{{ url_for('static', filename='scripts_scrub.js') }}"></script>
{% endblock %}

{% block title %}scrubber{% endblock %}
{% block field %}

<fieldset style="float:left; width:325px">
<legend>Scrubbing Options</legend>
<form id="scrub" action="" method="POST" enctype="multipart/form-data">

<div>
	<div style="float:left; margin-right:5px">
		<label class="checkbox" id="punctbox">
		    <input type="checkbox" name="punctuationbox" {{"checked" if session['punctuationbox'] else ""}} data-toggle="checkbox">
		    Remove Punctuation
		</label>
		<label class="checkbox" for="lowercasebox">
	        <input type="checkbox" name="lowercasebox" {{"checked" if session['lowercasebox'] else ""}} data-toggle="checkbox">
	        Make Lowercase
	    </label>
    	<label class="checkbox" for="digitsbox">
            <input type="checkbox" name="digitsbox" {{"checked" if session['digitsbox'] else ""}} data-toggle="checkbox">
            Remove Digits
        </label>
    </div>
    <div style="float:left">
		<label class="checkbox" for="aposbox" id="apos">
            <input type="checkbox" name="aposbox" {{"checked" if session['aposbox'] else ""}} data-toggle="checkbox">
            Keep Apostrophes
        </label>
		<label class="checkbox" for="hyphensbox" id="hyph">
            <input type="checkbox" name="hyphensbox"  {{"checked" if session['hyphensbox'] else ""}} data-toggle="checkbox">
            Keep Hyphens
        </label>
    </div>
</div>

<div style="display: {{ '' if session['hastags'] else 'none' }}; float:left">
	<label>Your text(s) contain tags. Would you like to:
		<label class="radio" style="margin-top: 7px">
			<input type="radio" name="tags" value="keep" {{"checked" if session['tags'] == "keep" else ""}} data-toggle="radio"/>&nbsp;&nbsp;&nbsp;Keep Words Between Tags
		</label>
		<label class="radio">
			<input type="radio" name="tags" value="discard" {{"" if session['tags'] == "keep" else "checked"}} data-toggle="radio" />&nbsp;&nbsp;&nbsp;Discard Words Between Tags
		</label>
	</label>
</div>
</fieldset>

<fieldset style="float:left; margin-left:10px">
<legend>Optional Uploads</legend>
<div>
	<div>
		<div class= "btn btn-primary" 
		id="stopwords">Stopwords</div>
		<img valign="bottom" 
		src="{{ url_for('static', filename='question_mark.png') }}" 
		alt="Question Mark" 
		title="Click the link to upload a stopword list (a text file with each stopword separated by a space or a comma)."/>
		<input type="file" id="swfileselect" name="swfileselect[]" style="display:none"/>
		<div id="stopwordmanualinput" style="display:inline">
			<input type="text" name="manualstopwords" placeholder="Enter stopwords..." class="span4" style="height:30px;margin-bottom:0px"/>
		</div>
		<div id="prettystopwordsupload" style="display:inline"> or 
			<div class="btn btn-primary" style="padding: 2px 4px 2px">Upload File</div>
		</div>
	</div>
	<div>
		<div class= "btn btn-primary" 
		id="lemmas">Lemmas</div> 
		<img valign="bottom" 
		src="{{ url_for('static', filename='question_mark.png') }}" 
		alt="Question Mark" 
		title="Click the link to upload a lemma list. Each lemma set should should have its own separate line. Word types associated with each lemma should take the form of a comma-separated list following the lemma (e.g. 'sing, sang, sung' for the lemma 'sing')." />
		<input type="file" id="lemmafileselect" name="lemmafileselect[]" style="display:none"/>
		<div id="lemmamanualinput" style="display:inline">
			<input type="text" name="manuallemmas" placeholder="Enter lemmas..." class="span4" style="height:30px"/>
		</div>
		<div id="prettylemmasupload" style="display:inline"> or 
			<div class="btn btn-primary" style="padding: 2px 4px 2px">Upload File</div>
		</div>
	</div>


<!-- 			<input type="checkbox" id="stopwordorderbox2" name="stopwordorderbox2"/> Apply stopwords before cutting 
				<img valign="bottom" 
				src="{{ url_for('static', filename='question_mark.png') }}" 
				alt="Question Mark" 
				title="**This function is not yet active** Stopwords are normally deleted after cutting so that the boundaries will match those of an unfiltered text. If you wish to filter stopwords <em>before</em> cutting has taken place (which will cause inconsistent decreases in the size of your slices), check this box."/>
			<br> -->


	<div>
		<div class= "btn btn-primary" 
		id="consolidations">Consolidations</div> 
		<img valign="bottom" 
		src="{{ url_for('static', filename='question_mark.png') }}" 
		alt="Question Mark" 
		title="Click the link to upload a consolidations list. Each line should contain a comma-separated list containing character pattern followed by a the values to replace with the pattern (e.g. 'a, aa, bb' will replace the latter two forms with the first)." />
		<input type="file" 
		id="consolidationsfileselect" 
		name="consolidationsfileselect[]" 
		style="display:none"/>
		<div id="consolidationsmanualinput" style="display:inline">
			<input type="text" name="manualconsolidations" placeholder="Enter consolidations..." class="span4" style="height:30px"/>
		</div>
		<div id="prettyconsolidationsupload" style="display:inline"> or 
			<div class="btn btn-primary" style="padding: 2px 4px 2px">Upload File</div>
		</div>
	</div>
	<div>
		<div class= "btn btn-primary" 
		id="specialchars" 
		onclick="$('#specialcharsfileselect').click()">Special Characters</div> 
		<img valign="bottom" 
		src="{{ url_for('static', filename='question_mark.png') }}" 
		alt="Question Mark" 
		title="Click the link to upload a list of rules for handling special character entities." />
		<input type="file" id="specialcharsfileselect" name="specialcharsfileselect[]" style="display:none"/>
	</div>
</div>



	<!-- 		<strong>Use Pre-Defined Rule Set</strong>
				<img src="{{ url_for('static', filename='question_mark.png') }}" 
				alt="Question Mark"
				valign="bottom"
				title="Currently, the DOE entities <i>&amp;ae;</i>, <i>&amp;d;</i>, <i>&amp;t;</i>, and <i>&amp;#0541;</i> are converted to <i>&aelig;</i>, <i>&eth;</i>, <i>&thorn;</i>, and <i>&#0541;</i> by default (though <i>&#0541;</i> is technically not a DOE entity). The dropdown makes this an option. Early English HTML does the same for HTML entities (e.g. <i>&amp;thorn;</i>), and other entities like <i>&amp;+#383;</i> = <i>Å¿</i> could be added to include Early Modern English." />
			<select id="entityrules" name="entityrules">
				<option value="default">Default</option>
				<option value="doe-sgml">Dictionary of Old English SGML</option>
				<option value="early-english-html">Early English HTML</option>
			</select>
			<p><a href="pre-defined-rules.html" target="_blank">View Pre-Defined Rule Sets</a></p> -->

</fieldset>
{% endblock %}


{% block submit %}
<input class="btn btn-info" type="submit" id="scrubsubmit" value="Scrub Files"/>
{% if session['scrubbed'] %}
<input class="btn btn-success" type="submit" name="cut" value="Proceed to Cutting"/>
<input class="btn btn-inverse" type="submit" name="download" value="Download Scrubbed Files" style="float:right"/>
{% endif %}
{% endblock %}



{% block content %}
{% for filename, file in preview.items() %}
<fieldset>
<legend>{{filename}} Preview</legend>
{{file}}
</fieldset>
{%- endfor %}

{% endblock %}