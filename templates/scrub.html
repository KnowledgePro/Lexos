{% extends "base.html" %}

{% block head %}
<script type="text/javascript" src="{{ url_for('static', filename='scripts_scrub.js') }}"></script>
{% endblock %}

{% block title %}scrubber{% endblock %}
{% block field %}

<fieldset style="float:left; width:325px">
<legend>Scrubbing Options</legend>
<form id="scrub" action="" method="POST" enctype="multipart/form-data">

<input type="hidden" id="usecache_swfileselect" name="usecache_swfileselect" value=""/>
<input type="hidden" id="usecache_lemfileselect" name="usecache_lemfileselect" value=""/>
<input type="hidden" id="usecache_consfileselect" name="usecache_consfileselect" value=""/>
<input type="hidden" id="usecache_scfileselect" name="usecache_scfileselect" value=""/>

<div>
	<div style="float:left; margin-right:5px">
		<label class="checkbox" id="punctbox">
		    <input type="checkbox" name="punctuationbox" {{"checked" if session['punctuationbox'] else ""}} data-toggle="checkbox">
		    Remove Punctuation
		</label>
		<label class="checkbox" for="lowercasebox">
	        <input type="checkbox" name="lowercasebox" {{"checked" if session['lowercasebox'] else ""}} data-toggle="checkbox">
	        Make Lowercase
	    </label>
    	<label class="checkbox" for="digitsbox">
            <input type="checkbox" name="digitsbox" {{"checked" if session['digitsbox'] else ""}} data-toggle="checkbox">
            Remove Digits
        </label>
    </div>
    <div style="float:left; {{ '' if session['punctuationbox'] else 'display:none' }}" id="aposhyph">
		<label class="checkbox" for="aposbox">
            <input type="checkbox" name="aposbox" {{"checked" if session['aposbox'] else ""}} data-toggle="checkbox">
            Keep Apostrophes
        </label>
		<label class="checkbox" for="hyphensbox">
            <input type="checkbox" name="hyphensbox"  {{"checked" if session['hyphensbox'] else ""}} data-toggle="checkbox">
            Keep Hyphens
        </label>
    </div>
</div>

<div style="display: {{ '' if session['hastags'] else 'none' }}; float:left">
	<label>Your text(s) contain tags. Would you like to:
		<label class="radio" style="margin-top: 7px">
			<input type="radio" name="tags" value="keep" {{"checked" if session['tags'] == "keep" else ""}} data-toggle="radio"/>&nbsp;&nbsp;&nbsp;Keep Words Between Tags
		</label>
		<label class="radio">
			<input type="radio" name="tags" value="discard" {{"" if session['tags'] == "keep" else "checked"}} data-toggle="radio" />&nbsp;&nbsp;&nbsp;Discard Words Between Tags
		</label>
	</label>
</div>
</fieldset>

<fieldset style="float:right; width:63%">
<legend>Optional Uploads</legend>
<div style="margin-left:auto; margin-right:auto">
	<div>
		<input type="file" id="swfileselect" name="swfileselect[]" style="display:none" />
		<div class= "optionbttn" id="stopwords">Stopwords</div>
		<div id="stopwordinput" style="{{ 'display:none' if session['opt_uploads']['swfileselect[]'] == '' else '' }}">
			<textarea name="manualstopwords" placeholder="Enter stopwords..." ></textarea>
			or
			<div style="display:inline-block">
				<div class="bttnfilelabels" id="swfileselectbttnlabel" style="text-align:center; color:#FF0000">{{ session['opt_uploads']['swfileselect[]'] }}</div>
				<div class="btn btn-primary" id="prettystopwordsupload" style="text-align:center; padding: 2px 4px">Upload Files</div>
			</div>
		</div>
	</div>
	<div>
		<input type="file" id="lemfileselect" name="lemfileselect[]" style="display:none"/>
		<div class= "optionbttn" id="lemmas">Lemmas</div>
		<div id="lemmainput" style="{{ 'display:none' if session['opt_uploads']['lemfileselect[]'] == '' else '' }}">
			<textarea name="manuallemmas" placeholder="Enter lemmas..." ></textarea>
			or
			<div style="display:inline-block">
				<div class="bttnfilelabels" id="lemfileselectbttnlabel" style="text-align:center; color:#FF0000">{{ session['opt_uploads']['lemfileselect[]'] }}</div>
				<div class="btn btn-primary" id="prettylemmasupload" style="text-align:center; padding: 2px 4px">Upload File</div>
			</div>
		</div>
	</div>
	<div>
		<input type="file" id="consfileselect" name="consfileselect[]" style="display:none"/>
		<div class= "optionbttn" id="consolidations">Consolidations</div> 
		<div id="consolidationsinput" style="{{ 'display:none' if session['opt_uploads']['consfileselect[]'] == '' else '' }}">
			<textarea name="manualconsolidations" placeholder="Enter consolidations..." ></textarea>
			or
			<div style="display:inline-block">
				<div class="bttnfilelabels" id="consfileselectbttnlabel" style="text-align:center; color:#FF0000">{{ session['opt_uploads']['consfileselect[]'] }}</div>
				<div class="btn btn-primary" id="prettyconsolidationsupload" style="text-align:center; padding: 2px 4px">Upload File</div>
			</div>
		</div>
	</div>
	<div>
		<input type="file" id="scfileselect" name="scfileselect[]" style="display:none"/>
		<div class= "optionbttn" id="specialchars">Special Characters</div> 
		<div id="specialcharsinput" style="{{ 'display:none' if session['opt_uploads']['scfileselect[]'] == '' else '' }}">
			<textarea name="manualspecialchars" placeholder="Enter special characters..."></textarea>
			or
			<div style="display:inline-block">
				<div class="bttnfilelabels" id="scfileselectbttnlabel" style="text-align:center; color:#FF0000">{{ session['opt_uploads']['scfileselect[]'] }}</div>
				<div class="btn btn-primary" id="prettyspecialcharsupload" style="text-align:center; padding: 2px 4px">Upload File</div>
			</div>
		</div>
	</div>
</div>







</fieldset>
{% endblock %}


{% block submit %}
<div style="height:20px"></div>
<input class="btn btn-info" type="submit" id="scrubsubmit" value="Preview Scrubbing"/>
{% if session['scrubbed'] %}
<input class="btn btn-success" type="submit" name="cut" value="Proceed to Cutting"/>
<input class="btn btn-inverse" type="submit" name="download" value="Download Scrubbed Files" style="float:right"/>
<input class="btn" type="submit" name="previewreload" value="Reload Previews" style="clear:both; float:left; padding:2px 5px; margin-top:10px"/>
{% endif %}
{% endblock %}



{% block content %}
{% for filename, file in preview.items() %}
<fieldset>
<legend>{{filename}} Preview</legend>
{{file}}
</fieldset>
{%- endfor %}

{% endblock %}