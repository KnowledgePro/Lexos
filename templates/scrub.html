{% extends "base.html" %}

{% block head %}
<script type="text/javascript" src="{{ url_for('static', filename='scripts_scrub.js') }}"></script>
{% endblock %}

{% block title %}scrubber{% endblock %}
{% block field %}

<fieldset style="float:left; width: 340px" >

<legend>Scrubbing Options</legend>
<form id="scrub" action="" method="POST" enctype="multipart/form-data">
<table>
<tr>
	<td style="width: 170px">
		<label class="checkbox" id="punctbox">
            <input type="checkbox" name="punctuationbox" {{"checked" if session['punctuationbox'] else ""}} data-toggle="checkbox">
            Remove Punctuation
        </label>
		<!-- <input type="checkbox" id="punctbox" name="punctuationbox" {{"checked" if session['punctuationbox'] else ""}} data-toggle="checkbox"/> -->
		<!-- <label for="punctbox" value="yes">Remove Punctuation</label> -->
	</td>
	<td style="width: 170px" id="apos" style="display:{{ '' if session['punctuationbox'] else 'none'}}">
		<label class="checkbox" for="aposbox">
            <input type="checkbox" name="aposbox" {{"checked" if session['aposbox'] else ""}} data-toggle="checkbox">
            Keep Apostrophes
        </label>
	</td>
</tr>

<tr>
	<td style="width: 170px">
		<label class="checkbox" for="lowercasebox">
            <input type="checkbox" name="lowercasebox" {{"checked" if session['lowercasebox'] else ""}} data-toggle="checkbox">
            Make Lowercase
        </label>
	</td style="width: 170px">
	<td id="hyph" style="display:{{ '' if session['punctuationbox'] else 'none'}}">
		<label class="checkbox" for="hyphensbox">
            <input type="checkbox" name="hyphensbox"  {{"checked" if session['hyphensbox'] else ""}} data-toggle="checkbox">
            Keep Hyphens
        </label>
	</td>
</tr>

<tr>
	<td style="width: 175px">
	<label class="checkbox" for="digitsbox">
            <input type="checkbox" name="digitsbox" {{"checked" if session['digitsbox'] else ""}} data-toggle="checkbox">
            Remove Digits
        </label>
	</td>
	<td>
	</td>
</tr>
</table>

<br>

<table>
<tr class="taghandler" style="display:{{ 'inline' if session['hastags'] else 'none' }}">
	<td>Your text(s) contain tags. Would you like to:<br>
	<input type="radio" name="tags" value="keep" {{"checked" if session['tags'] == "keep" else ""}} />&nbsp;&nbsp;&nbsp;Keep Words Between Tags<br>
	<input type="radio" name="tags" value="discard" {{"checked" if session['tags'] == "discard" else ""}}  />&nbsp;&nbsp;&nbsp;Discard Words Between Tags
	</td>
</tr>
</table>

</fieldset>


<fieldset style="float:right; width:580px">
<legend>Optional Uploads 
	<button type="button" id="alloptuploadstoggle">Toggle All</button>
</legend>
<table>

<tr>
	<td style="width: 290px">
		<a class= "btn btn-info" 
		id="stopwords" 
		onclick="$('#swfileselect').click()">Load Stopword List</a> 
		<img valign="bottom" 
		src="{{ url_for('static', filename='question_mark.png') }}" 
		alt="Question Mark" 
		title="Click the link to upload a stopword list (a text file with each stopword separated by a space or a comma)." />
		<input type="file" 
		id="swfileselect" 
		name="swfileselect[]" 
		style="display:none"/>
	</td>
	<td style="width: 290px">
		<a class= "btn btn-info" 
		id="lemmas" 
		onclick="$('#lemmafileselect').click()">Load Lemma List</a> 
		<img valign="bottom" 
		src="{{ url_for('static', filename='question_mark.png') }}" 
		alt="Question Mark" 
		title="Click the link to upload a lemma list. Each lemma set should should have its own separate line. Word types associated with each lemma should take the form of a comma-separated list following the lemma (e.g. 'sing, sang, sung' for the lemma 'sing')." />
		<input type="file" 
		id="lemmafileselect" 
		name="lemmafileselect[]" 
		style="display:none"/>
	</td>
</tr>


<!-- 			<input type="checkbox" id="stopwordorderbox2" name="stopwordorderbox2"/> Apply stopwords before cutting 
				<img valign="bottom" 
				src="{{ url_for('static', filename='question_mark.png') }}" 
				alt="Question Mark" 
				title="**This function is not yet active** Stopwords are normally deleted after cutting so that the boundaries will match those of an unfiltered text. If you wish to filter stopwords <em>before</em> cutting has taken place (which will cause inconsistent decreases in the size of your slices), check this box."/>
			<br> -->


<tr>
	<td style="width: 290px">
		<a class= "btn btn-info" 
		id="consolidations" 
		onclick="$('#consolidationsfileselect').click()">Load Consolidations List</a> 
		<img valign="bottom" 
		src="{{ url_for('static', filename='question_mark.png') }}" 
		alt="Question Mark" 
		title="Click the link to upload a consolidations list. Each line should contain a comma-separated list containing character pattern followed by a the values to replace with the pattern (e.g. 'a, aa, bb' will replace the latter two forms with the first)." />
		<input type="file" 
		id="consolidationsfileselect" 
		name="consolidationsfileselect[]" 
		style="display:none"/>
	</td>
	<td style="width: 290px">
		<a class= "btn btn-info" 
		id="specialchars" 
		onclick="$('#specialcharsfileselect').click()">Special Characters Handling</a> 
		<img valign="bottom" 
		src="{{ url_for('static', filename='question_mark.png') }}" 
		alt="Question Mark" 
		title="Click the link to upload a list of rules for handling special character entities." />
		<input type="file" id="specialcharsfileselect" name="specialcharsfileselect[]" style="display:none"/>
	</td>
</tr>



	<!-- 		<strong>Use Pre-Defined Rule Set</strong>
				<img src="{{ url_for('static', filename='question_mark.png') }}" 
				alt="Question Mark"
				valign="bottom"
				title="Currently, the DOE entities <i>&amp;ae;</i>, <i>&amp;d;</i>, <i>&amp;t;</i>, and <i>&amp;#0541;</i> are converted to <i>&aelig;</i>, <i>&eth;</i>, <i>&thorn;</i>, and <i>&#0541;</i> by default (though <i>&#0541;</i> is technically not a DOE entity). The dropdown makes this an option. Early English HTML does the same for HTML entities (e.g. <i>&amp;thorn;</i>), and other entities like <i>&amp;+#383;</i> = <i>Å¿</i> could be added to include Early Modern English." />
			<select id="entityrules" name="entityrules">
				<option value="default">Default</option>
				<option value="doe-sgml">Dictionary of Old English SGML</option>
				<option value="early-english-html">Early English HTML</option>
			</select>
			<p><a href="pre-defined-rules.html" target="_blank">View Pre-Defined Rule Sets</a></p> -->


</table>
</fieldset>
{% endblock %}


{% block content %}
{% for filename, file in preview.items() %}
<fieldset>
<legend>{{filename}} Preview</legend>
{{file}}
</fieldset>
{%- endfor %}

{% endblock %}


{% block submit %}
<input class="btn btn-primary" type="submit" id="scrubsubmit" value="Scrub Files"/>
{% if session['scrubbed'] %}
<input class="btn btn-success" type="submit" name="cut" value="Proceed to Cutting"/>
<input class="btn btn-info" type="submit" name="download" value="Download Scrubbed Files"/>
{% endif %}
{% endblock %}