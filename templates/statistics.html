{% extends "base_analyze.html" %}
{% set active_page = 'statistics' %}

{% block head %}
<script type="text/javascript" src="{{ url_for('static', filename='js/scripts_extension.js') }}?ver={{version}}"></script>
<!-- <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css">
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap-theme.min.css">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script> -->

<!-- DataTables CSS -->
<link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='DataTables-1.10.7/media/css/jquery.dataTables.css') }}?ver={{version}}">
<link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='DataTables-1.10.7/extensions/TableTools/css/dataTables.tableTools.css') }}?ver={{version}}">
<link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='DataTables-1.10.7/extensions/FixedColumns/css/dataTables.fixedColumns.css') }}?ver={{version}}">

<!-- DataTables -->
<script type="text/javascript" charset="utf8" src="{{ url_for('static', filename='DataTables-1.10.7/media/js/jquery.dataTables.min.js') }}?ver={{version}}"></script>
<script type="text/javascript" charset="utf8" src="{{ url_for('static', filename='DataTables-1.10.7/extensions/TableTools/js/dataTables.tableTools.min.js') }}?ver={{version}}"></script>
<script type="text/javascript" charset="utf8" src="{{ url_for('static', filename='DataTables-1.10.7/natural.js') }}?ver={{version}}"></script>
<script type="text/javascript" charset="utf8" src="{{ url_for('static', filename='DataTables-1.10.7/extensions/FixedColumns/js/dataTables.fixedColumns.min.js') }}?ver={{version}}"></script>

<!-- Lexos Scripts -->
<script type="text/javascript" src="{{ url_for('static', filename='js/scripts_statistics.js') }}?ver={{version}}"></script>
<script type="text/javascript">
<script>
</script>
<!-- CSS for DataTables -->
<style type="text/css">
	.clear {clear:both;}
</style>

{% endblock %}

{% block title %}statistics{% endblock %}


{% block results %}


{% if (labels|len) == 0 %}
	<span id="no-active-error">No Documents are Selected</span>

{% else %}

{% if FileInfoDict %}

<style>
	#scroll{
		border:1px solid #BBB;border-radius:6px;
  		border-spacing:10px;max-height:440px;float:left;
  		overflow:auto;margin-top:30px;margin-left:115px;padding: 10px 10px 10px 10px;}
</style>
<div id="sort">
	<!--<div style="margin-bottom:30px;"></div>-->
	<table class="display">
	<thead>
		<tr>
			<th>Document Name</th>
			<th>Number of Distinct Terms</th>
			<th>Number of Words Occurring Once</th>
			<th>Total Term Count</th>
			<th>Average {% if normalize == 'freq' %} (proportional) {% else %} ({{normalize}}) {% endif %}</th>
		</tr>
	</thead>
	<tbody>
	{% for file in FileInfoDict %}
		<tr>
			<td><center>{{ file[1].name }}</center></td>
			<td><center>{{ file[1].numUniqueWords }}</center></td>
			<td><center>{{ file[1].Hapax }}  </center></td>
			<td><center>{{ file[1].totalwordCount }}</center></td>
			<td><center>{{ file[1].average }}</center></td>
		</tr>
	{% endfor %}
	</tbody>
	</table>
</div>

<div>
	<table>
		{% if corpusInfoDict %}
			<thead>
				<tr>
					<th>Entire Corpus Information:</th>
				</tr>
			</thead>
			<tbody>
				<tr>
					<td>
						Average File Size: {{ corpusInfoDict['average'] }}<br>
						Median File Size: {{ corpusInfoDict['median'] }}<br>

						{% if corpusInfoDict['fileanomalyStdE'] == {} %}
							No anomalies found
						{% else %}
							Anomaly found in
							{% for key in corpusInfoDict['fileanomalyStdE'] %}
								{{key}} with size: {{ corpusInfoDict['fileanomalyStdE'][key] }}
							{% endfor %}
						{% endif %}
					</td>
				</tr>
			</tbody>
		{% endif %}
	</table>
</div>

{% endif %}

<p></p>
<input type="submit" class="bttn bttn-action" id="statsgen" name="gen-stats" value="Generate Statistics"/>


{% endif %}
{% endblock %}
