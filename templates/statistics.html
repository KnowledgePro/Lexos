{% extends "base_analyze.html" %}
{% set active_page = 'statistics' %}

{% block head %}
<script type="text/javascript" src="{{ url_for('static', filename='js/scripts_extension.js') }}?ver={{version}}"></script>
<script type="text/javascript" src="{{ url_for('static', filename='js/scripts_analyze.js') }}?ver={{version}}"></script>
<!-- <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css">
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap-theme.min.css">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script> -->

<!-- DataTables CSS -->
<link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='DataTables-1.10.7/media/css/jquery.dataTables.css') }}?ver={{version}}">
<link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='DataTables-1.10.7/extensions/TableTools/css/dataTables.tableTools.css') }}?ver={{version}}">
<link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='DataTables-1.10.7/extensions/FixedColumns/css/dataTables.fixedColumns.css') }}?ver={{version}}">

<!-- DataTables -->
<script type="text/javascript" charset="utf8" src="{{ url_for('static', filename='DataTables-1.10.7/media/js/jquery.dataTables.min.js') }}?ver={{version}}"></script>
<script type="text/javascript" charset="utf8" src="{{ url_for('static', filename='DataTables-1.10.7/extensions/TableTools/js/dataTables.tableTools.min.js') }}?ver={{version}}"></script>
<script type="text/javascript" charset="utf8" src="{{ url_for('static', filename='DataTables-1.10.7/natural.js') }}?ver={{version}}"></script>
<script type="text/javascript" charset="utf8" src="{{ url_for('static', filename='DataTables-1.10.7/extensions/FixedColumns/js/dataTables.fixedColumns.min.js') }}?ver={{version}}"></script>
<!-- Lexos Scripts -->
<script type="text/javascript" src="{{ url_for('static', filename='js/scripts_statistics.js') }}?ver={{version}}"></script>
<script>
$(document).ready( function () {
	$('#statsgen').click(function() {
		$("#status-prepare").css({"visibility":"visible", "z-index": "400000"});
	});
	$(DataTables_Table_0_wrapper).css({"padding-top":"50px"});
});
</script>
<!-- CSS for DataTables -->
{% endblock %}


{% block title %}statistics{% endblock %}


{% block options %}

<legend style="width: 400px;">Select a File</legend>
{% if labels|len > 0 %}
    <div class="forAllCheckBox"><label><input type="checkbox" id="allCheckBoxSelector">Check/Uncheck All</label></div>
{%- endif %}
<div id="statsFileSelect" name="segmentlistdiv" style="overflow:auto; width: 400px; float: left; max-height: 100px; min-height: 2em;">
    {% for fileID, label in labels.items() %}
    <div class="forCheckBox">
      <label>{{label}}
        <input type="checkbox" name="segmentlist" class="minifilepreview"  {{ 'checked' if fileID in labels2 }} id="{{fileID}}_selector" value="{{fileID}}">
      </label>
    </div>
    {%- endfor %}
    {% if labels|len == 0 %}
      <span id="no-labels">No Documents are Selected</span>
    {%- endif %}
</div>
{% endblock %}

{% block results %}
{% if FileInfoDict %}
<div id="entire-corpus">
	<legend>Statistics for Entire Corpus</legend>
	<table>
		{% if corpusInfoDict %}
			<tbody>
				<tr>
					<td>
						Average File Size: {{ corpusInfoDict['average'] }}<br>
						Median File Size: {{ corpusInfoDict['median'] }}<br>

						{% if corpusInfoDict['fileanomalyStdE'] == {} %}
							No anomalies found
						{% else %}
							Anomaly found in
							{% for key in corpusInfoDict['fileanomalyStdE'] %}
								{{key}} with size: {{ corpusInfoDict['fileanomalyStdE'][key] }}
							{% endfor %}
						{% endif %}
					</td>
				</tr>
			</tbody>
		{% endif %}
	</table>
</div>
<div>
	<table class="display">
	<thead>
		<tr>
			<th>Document Name</th>
			<th>Number of Distinct Terms</th>
			<th>Number of Words Occurring Once</th>
			<th>Total Term Count</th>
			<th>Average (raw counts)</th>
		</tr>
	</thead>
	<tbody>
	{% for file in FileInfoDict %}
		<tr>
			<td>{{ file[1].name }}</td>
			<td>{{ file[1].numUniqueWords }}</td>
			<td>{{ file[1].Hapax }} </td>
			<td>{{ file[1].totalwordCount }}</td>
			<td>{{ file[1].average }}</td>
		</tr>
	{% endfor %}
	</tbody>
	</table>
</div>

{% endif %}

<div id="analyze-submit" class="cf">
	<input type="submit" class="bttn bttn-action" id="statsgen" name="gen-stats" value="Generate Statistics"/>
</div>
{% endblock %}

